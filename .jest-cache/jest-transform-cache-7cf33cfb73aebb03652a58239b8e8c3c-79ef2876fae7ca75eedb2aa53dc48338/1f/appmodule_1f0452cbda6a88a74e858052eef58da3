349110aa62571845cabc92ea6e1cebd5
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppModule = void 0;
// import { I18nModule } from './i18n/i18n.module';
const common_1 = require("@nestjs/common");
const config_1 = require("@nestjs/config");
const typeorm_1 = require("@nestjs/typeorm");
const users_module_1 = require("./users/users.module");
const courses_module_1 = require("./courses/courses.module");
const auth_module_1 = require("./auth/auth.module");
const certificate_module_1 = require("./certificate/certificate.module");
const files_module_1 = require("./files/files.module");
const email_module_1 = require("./email/email.module");
const lesson_module_1 = require("./lesson/lesson.module");
const ipfs_module_1 = require("./ipfs/ipfs.module");
const moderation_module_1 = require("./moderation/moderation.module");
const submission_module_1 = require("./submission/submission.module");
const user_profiles_module_1 = require("./user-profiles/user-profiles.module");
const credential_module_1 = require("./credential/credential.module");
const translation_module_1 = require("./translation/translation.module");
const app_controller_1 = require("./app.controller");
const app_service_1 = require("./app.service");
// import { FeedbackModule } from './feedback/feedback.module';
const mentorship_module_1 = require("./mentorship/mentorship.module");
const archive_module_1 = require("./archive/archive.module");
const database_config_1 = __importDefault(require("./config/database.config"));
const schedule_1 = require("@nestjs/schedule");
const gdpr_module_1 = require("./gdpr/gdpr.module");
const monitoring_module_1 = require("./monitoring/monitoring-module");
const courses_advances_module_1 = require("./courses-advances/courses-advances.module");
const core_1 = require("@nestjs/core");
const throttler_1 = require("@nestjs/throttler");
const custom_throttler_guard_1 = require("./common/guards/custom-throttler.guard");
const api_usage_logger_middleware_1 = require("./common/middleware/api-usage-logger.middleware");
const deprecation_warning_middleware_1 = require("./common/middleware/deprecation-warning.middleware");
const version_tracking_interceptor_1 = require("./common/interceptors/version-tracking.interceptor");
const version_analytics_service_1 = require("./common/services/version-analytics.service");
const performance_interceptor_1 = require("./monitoring/performance.interceptor");
const auth_controller_v1_1 = require("./modules/auth/controllers/auth.controller.v1");
const auth_controller_v2_1 = require("./modules/auth/controllers/auth.controller.v2");
// import { CoursesControllerV1 } from './modules/courses/controllers/courses.controller.v1';
// import { CoursesControllerV2 } from './modules/courses/controllers/courses.controller.v2';
const version_controller_1 = require("./modules/version/version.controller");
const api_version_config_1 = require("./config/api-version.config");
const version_header_middleware_1 = require("./common/middleware/version-header.middleware");
const payment_module_1 = require("./payment/payment.module");
const ENV = process.env.NODE_ENV;
;
console.log('NODE_ENV:', process.env.NODE_ENV);
console.log('ENV:', ENV);
let AppModule = class AppModule {
    configure(consumer) {
        consumer
            .apply(version_header_middleware_1.VersionHeaderMiddleware, deprecation_warning_middleware_1.DeprecationWarningMiddleware, api_usage_logger_middleware_1.ApiUsageLoggerMiddleware)
            .forRoutes('*');
    }
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            throttler_1.ThrottlerModule.forRoot({
                ttl: 60, // 60 seconds
                limit: 100,
            }),
            // Global Config
            schedule_1.ScheduleModule.forRoot(),
            config_1.ConfigModule.forRoot({
                isGlobal: true,
                envFilePath: !ENV ? '.env' : `.env.${ENV.trim()}`,
                load: [database_config_1.default, () => ({ api: api_version_config_1.apiVersionConfig })],
            }),
            // Database
            typeorm_1.TypeOrmModule.forRootAsync({
                imports: [config_1.ConfigModule],
                inject: [config_1.ConfigService],
                useFactory: async (configService) => ({
                    type: 'postgres',
                    host: configService.get('database.host'),
                    port: configService.get('database.port'),
                    username: configService.get('database.user'),
                    password: configService.get('database.password'),
                    database: configService.get('database.name'),
                    autoLoadEntities: configService.get('database.autoload'),
                    synchronize: configService.get('database.synchronize'),
                    // Connection Pool Settings
                    extra: {
                        max: configService.get('database.maxPoolSize'),
                        min: configService.get('database.minPoolSize'),
                        idleTimeoutMillis: configService.get('database.poolIdleTimeout'),
                    },
                    // Retry Mechanism
                    retryAttempts: configService.get('database.retryAttempts'),
                    retryDelay: configService.get('database.retryDelay'),
                }),
            }),
            users_module_1.UsersModule,
            courses_module_1.CoursesModule,
            auth_module_1.AuthModule,
            certificate_module_1.CertificateModule,
            files_module_1.FilesModule,
            email_module_1.EmailModule,
            lesson_module_1.LessonModule,
            ipfs_module_1.IpfsModule,
            moderation_module_1.ModerationModule,
            submission_module_1.SubmissionModule,
            user_profiles_module_1.UserProfilesModule,
            credential_module_1.CredentialModule,
            archive_module_1.ArchiveModule,
            // FeedbackModule,
            // I18nModule,
            mentorship_module_1.MentorshipModule,
            translation_module_1.TranslationModule,
            gdpr_module_1.GdprModule,
            monitoring_module_1.MonitoringModule,
            users_module_1.UsersModule,
            courses_advances_module_1.CoursesAdvancesModule,
            auth_controller_v1_1.AuthControllerV1,
            auth_controller_v2_1.AuthControllerV2,
            // CoursesControllerV1,
            // CoursesControllerV2,
            version_controller_1.VersionController,
            CmsModule,
            payment_module_1.PaymentModule,
        ],
        controllers: [app_controller_1.AppController],
        providers: [
            app_service_1.AppService,
            version_analytics_service_1.VersionAnalyticsService,
            {
                provide: core_1.APP_INTERCEPTOR,
                useClass: version_tracking_interceptor_1.VersionTrackingInterceptor,
            },
            {
                provide: core_1.APP_INTERCEPTOR,
                useClass: performance_interceptor_1.PerformanceInterceptor,
            },
            {
                provide: core_1.APP_GUARD,
                useClass: custom_throttler_guard_1.CustomThrottlerGuard,
            },
            StellarService,
        ],
    })
], AppModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxvam9zZXBoXFxEb2N1bWVudHNcXFN0cmVsbGVyTWluZHMtQmFja2VuZFxcc3JjXFxhcHAubW9kdWxlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLG1EQUFtRDtBQUNuRCwyQ0FBd0U7QUFDeEUsMkNBQTZEO0FBQzdELDZDQUFnRDtBQUNoRCx1REFBbUQ7QUFDbkQsNkRBQXlEO0FBQ3pELG9EQUFnRDtBQUNoRCx5RUFBcUU7QUFDckUsdURBQW1EO0FBQ25ELHVEQUFtRDtBQUNuRCwwREFBc0Q7QUFDdEQsb0RBQWdEO0FBQ2hELHNFQUFrRTtBQUNsRSxzRUFBa0U7QUFDbEUsK0VBQTBFO0FBQzFFLHNFQUFrRTtBQUNsRSx5RUFBcUU7QUFDckUscURBQWlEO0FBQ2pELCtDQUEyQztBQUMzQywrREFBK0Q7QUFDL0Qsc0VBQWtFO0FBQ2xFLDZEQUF5RDtBQUN6RCwrRUFBc0Q7QUFDdEQsK0NBQWtEO0FBQ2xELG9EQUFnRDtBQUNoRCxzRUFBa0U7QUFDbEUsd0ZBQW1GO0FBQ25GLHVDQUEwRDtBQUMxRCxpREFBb0Q7QUFDcEQsbUZBQThFO0FBQzlFLGlHQUEyRjtBQUMzRix1R0FBa0c7QUFDbEcscUdBQWdHO0FBQ2hHLDJGQUFzRjtBQUN0RixrRkFBOEU7QUFFOUUsc0ZBQWlGO0FBQ2pGLHNGQUFpRjtBQUNqRiw2RkFBNkY7QUFDN0YsNkZBQTZGO0FBQzdGLDZFQUF5RTtBQUN6RSxvRUFBK0Q7QUFDL0QsNkZBQXdGO0FBQ3hGLDZEQUF5RDtBQUV6RCxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUFBLENBQUM7QUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMvQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztBQTBGbEIsSUFBTSxTQUFTLEdBQWYsTUFBTSxTQUFTO0lBQ3BCLFNBQVMsQ0FBQyxRQUE0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QUNFLE9BQU8sRUFBRSxzQkFBZTtnQkFDeEIsUUFBUSxFQUFFLHlEQUEwQjthQUNyQztZQUNEO2dCQUNFLE9BQU8sRUFBRSxzQkFBZTtnQkFDeEIsUUFBUSxFQUFFLGdEQUFzQjthQUNqQztZQUNEO2dCQUNFLE9BQU8sRUFBRSxnQkFBUztnQkFDbEIsUUFBUSxFQUFFLDZDQUFvQjthQUMvQjtZQUNELGNBQWM7U0FDZjtLQUNGLENBQUM7R0FDVyxTQUFTLENBVXJCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcb2pvc2VwaFxcRG9jdW1lbnRzXFxTdHJlbGxlck1pbmRzLUJhY2tlbmRcXHNyY1xcYXBwLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBJMThuTW9kdWxlIH0gZnJvbSAnLi9pMThuL2kxOG4ubW9kdWxlJztcclxuaW1wb3J0IHsgTW9kdWxlLCBOZXN0TW9kdWxlLCBNaWRkbGV3YXJlQ29uc3VtZXIgfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XHJcbmltcG9ydCB7IENvbmZpZ01vZHVsZSwgQ29uZmlnU2VydmljZSB9IGZyb20gJ0BuZXN0anMvY29uZmlnJztcclxuaW1wb3J0IHsgVHlwZU9ybU1vZHVsZSB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XHJcbmltcG9ydCB7IFVzZXJzTW9kdWxlIH0gZnJvbSAnLi91c2Vycy91c2Vycy5tb2R1bGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VzTW9kdWxlIH0gZnJvbSAnLi9jb3Vyc2VzL2NvdXJzZXMubW9kdWxlJztcclxuaW1wb3J0IHsgQXV0aE1vZHVsZSB9IGZyb20gJy4vYXV0aC9hdXRoLm1vZHVsZSc7XHJcbmltcG9ydCB7IENlcnRpZmljYXRlTW9kdWxlIH0gZnJvbSAnLi9jZXJ0aWZpY2F0ZS9jZXJ0aWZpY2F0ZS5tb2R1bGUnO1xyXG5pbXBvcnQgeyBGaWxlc01vZHVsZSB9IGZyb20gJy4vZmlsZXMvZmlsZXMubW9kdWxlJztcclxuaW1wb3J0IHsgRW1haWxNb2R1bGUgfSBmcm9tICcuL2VtYWlsL2VtYWlsLm1vZHVsZSc7XHJcbmltcG9ydCB7IExlc3Nvbk1vZHVsZSB9IGZyb20gJy4vbGVzc29uL2xlc3Nvbi5tb2R1bGUnO1xyXG5pbXBvcnQgeyBJcGZzTW9kdWxlIH0gZnJvbSAnLi9pcGZzL2lwZnMubW9kdWxlJztcclxuaW1wb3J0IHsgTW9kZXJhdGlvbk1vZHVsZSB9IGZyb20gJy4vbW9kZXJhdGlvbi9tb2RlcmF0aW9uLm1vZHVsZSc7XHJcbmltcG9ydCB7IFN1Ym1pc3Npb25Nb2R1bGUgfSBmcm9tICcuL3N1Ym1pc3Npb24vc3VibWlzc2lvbi5tb2R1bGUnO1xyXG5pbXBvcnQgeyBVc2VyUHJvZmlsZXNNb2R1bGUgfSBmcm9tICcuL3VzZXItcHJvZmlsZXMvdXNlci1wcm9maWxlcy5tb2R1bGUnO1xyXG5pbXBvcnQgeyBDcmVkZW50aWFsTW9kdWxlIH0gZnJvbSAnLi9jcmVkZW50aWFsL2NyZWRlbnRpYWwubW9kdWxlJztcclxuaW1wb3J0IHsgVHJhbnNsYXRpb25Nb2R1bGUgfSBmcm9tICcuL3RyYW5zbGF0aW9uL3RyYW5zbGF0aW9uLm1vZHVsZSc7XHJcbmltcG9ydCB7IEFwcENvbnRyb2xsZXIgfSBmcm9tICcuL2FwcC5jb250cm9sbGVyJztcclxuaW1wb3J0IHsgQXBwU2VydmljZSB9IGZyb20gJy4vYXBwLnNlcnZpY2UnO1xyXG4vLyBpbXBvcnQgeyBGZWVkYmFja01vZHVsZSB9IGZyb20gJy4vZmVlZGJhY2svZmVlZGJhY2subW9kdWxlJztcclxuaW1wb3J0IHsgTWVudG9yc2hpcE1vZHVsZSB9IGZyb20gJy4vbWVudG9yc2hpcC9tZW50b3JzaGlwLm1vZHVsZSc7XHJcbmltcG9ydCB7IEFyY2hpdmVNb2R1bGUgfSBmcm9tICcuL2FyY2hpdmUvYXJjaGl2ZS5tb2R1bGUnO1xyXG5pbXBvcnQgZGF0YWJhc2VDb25maWcgZnJvbSAnLi9jb25maWcvZGF0YWJhc2UuY29uZmlnJztcclxuaW1wb3J0IHsgU2NoZWR1bGVNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3NjaGVkdWxlJztcclxuaW1wb3J0IHsgR2Rwck1vZHVsZSB9IGZyb20gJy4vZ2Rwci9nZHByLm1vZHVsZSc7XHJcbmltcG9ydCB7IE1vbml0b3JpbmdNb2R1bGUgfSBmcm9tICcuL21vbml0b3JpbmcvbW9uaXRvcmluZy1tb2R1bGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VzQWR2YW5jZXNNb2R1bGUgfSBmcm9tICcuL2NvdXJzZXMtYWR2YW5jZXMvY291cnNlcy1hZHZhbmNlcy5tb2R1bGUnO1xyXG5pbXBvcnQgeyBBUFBfSU5URVJDRVBUT1IsIEFQUF9HVUFSRCB9IGZyb20gJ0BuZXN0anMvY29yZSc7XHJcbmltcG9ydCB7IFRocm90dGxlck1vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGhyb3R0bGVyJztcclxuaW1wb3J0IHsgQ3VzdG9tVGhyb3R0bGVyR3VhcmQgfSBmcm9tICcuL2NvbW1vbi9ndWFyZHMvY3VzdG9tLXRocm90dGxlci5ndWFyZCc7XHJcbmltcG9ydCB7IEFwaVVzYWdlTG9nZ2VyTWlkZGxld2FyZSB9IGZyb20gJy4vY29tbW9uL21pZGRsZXdhcmUvYXBpLXVzYWdlLWxvZ2dlci5taWRkbGV3YXJlJztcclxuaW1wb3J0IHsgRGVwcmVjYXRpb25XYXJuaW5nTWlkZGxld2FyZSB9IGZyb20gJy4vY29tbW9uL21pZGRsZXdhcmUvZGVwcmVjYXRpb24td2FybmluZy5taWRkbGV3YXJlJztcclxuaW1wb3J0IHsgVmVyc2lvblRyYWNraW5nSW50ZXJjZXB0b3IgfSBmcm9tICcuL2NvbW1vbi9pbnRlcmNlcHRvcnMvdmVyc2lvbi10cmFja2luZy5pbnRlcmNlcHRvcic7XHJcbmltcG9ydCB7IFZlcnNpb25BbmFseXRpY3NTZXJ2aWNlIH0gZnJvbSAnLi9jb21tb24vc2VydmljZXMvdmVyc2lvbi1hbmFseXRpY3Muc2VydmljZSc7XHJcbmltcG9ydCB7IFBlcmZvcm1hbmNlSW50ZXJjZXB0b3IgfSBmcm9tICcuL21vbml0b3JpbmcvcGVyZm9ybWFuY2UuaW50ZXJjZXB0b3InO1xyXG5pbXBvcnQgeyBBcGlVc2FnZUxvZyB9IGZyb20gJy4vY29tbW9uL2VudGl0aWVzL2FwaS11c2FnZS1sb2cuZW50aXR5JztcclxuaW1wb3J0IHsgQXV0aENvbnRyb2xsZXJWMSB9IGZyb20gJy4vbW9kdWxlcy9hdXRoL2NvbnRyb2xsZXJzL2F1dGguY29udHJvbGxlci52MSc7XHJcbmltcG9ydCB7IEF1dGhDb250cm9sbGVyVjIgfSBmcm9tICcuL21vZHVsZXMvYXV0aC9jb250cm9sbGVycy9hdXRoLmNvbnRyb2xsZXIudjInO1xyXG4vLyBpbXBvcnQgeyBDb3Vyc2VzQ29udHJvbGxlclYxIH0gZnJvbSAnLi9tb2R1bGVzL2NvdXJzZXMvY29udHJvbGxlcnMvY291cnNlcy5jb250cm9sbGVyLnYxJztcclxuLy8gaW1wb3J0IHsgQ291cnNlc0NvbnRyb2xsZXJWMiB9IGZyb20gJy4vbW9kdWxlcy9jb3Vyc2VzL2NvbnRyb2xsZXJzL2NvdXJzZXMuY29udHJvbGxlci52Mic7XHJcbmltcG9ydCB7IFZlcnNpb25Db250cm9sbGVyIH0gZnJvbSAnLi9tb2R1bGVzL3ZlcnNpb24vdmVyc2lvbi5jb250cm9sbGVyJztcclxuaW1wb3J0IHsgYXBpVmVyc2lvbkNvbmZpZyB9IGZyb20gJy4vY29uZmlnL2FwaS12ZXJzaW9uLmNvbmZpZyc7XHJcbmltcG9ydCB7IFZlcnNpb25IZWFkZXJNaWRkbGV3YXJlIH0gZnJvbSAnLi9jb21tb24vbWlkZGxld2FyZS92ZXJzaW9uLWhlYWRlci5taWRkbGV3YXJlJztcclxuaW1wb3J0IHsgUGF5bWVudE1vZHVsZSB9IGZyb20gJy4vcGF5bWVudC9wYXltZW50Lm1vZHVsZSc7XHJcblxyXG5jb25zdCBFTlYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjs7XHJcbmNvbnNvbGUubG9nKCdOT0RFX0VOVjonLCBwcm9jZXNzLmVudi5OT0RFX0VOVik7XHJcbmNvbnNvbGUubG9nKCdFTlY6JywgRU5WKTtcclxuXHJcbkBNb2R1bGUoe1xyXG4gIGltcG9ydHM6IFtcclxuICAgIFRocm90dGxlck1vZHVsZS5mb3JSb290KHtcclxuICAgICAgdHRsOiA2MCwgLy8gNjAgc2Vjb25kc1xyXG4gICAgICBsaW1pdDogMTAwLFxyXG4gICAgfSksXHJcbiAgICAvLyBHbG9iYWwgQ29uZmlnXHJcbiAgICBTY2hlZHVsZU1vZHVsZS5mb3JSb290KCksXHJcbiAgICBDb25maWdNb2R1bGUuZm9yUm9vdCh7XHJcbiAgICAgIGlzR2xvYmFsOiB0cnVlLFxyXG4gICAgICBlbnZGaWxlUGF0aDogIUVOViA/ICcuZW52JyA6IGAuZW52LiR7RU5WLnRyaW0oKX1gLFxyXG4gICAgICBsb2FkOiBbZGF0YWJhc2VDb25maWcsICgpID0+ICh7IGFwaTogYXBpVmVyc2lvbkNvbmZpZyB9KV0sXHJcbiAgICB9KSxcclxuXHJcbiAgICAvLyBEYXRhYmFzZVxyXG4gICAgVHlwZU9ybU1vZHVsZS5mb3JSb290QXN5bmMoe1xyXG4gICAgICBpbXBvcnRzOiBbQ29uZmlnTW9kdWxlXSxcclxuICAgICAgaW5qZWN0OiBbQ29uZmlnU2VydmljZV0sXHJcbiAgICAgIHVzZUZhY3Rvcnk6IGFzeW5jIChjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlKSA9PiAoe1xyXG4gICAgICAgIHR5cGU6ICdwb3N0Z3JlcycsXHJcbiAgICAgICAgaG9zdDogY29uZmlnU2VydmljZS5nZXQ8c3RyaW5nPignZGF0YWJhc2UuaG9zdCcpLFxyXG4gICAgICAgIHBvcnQ6IGNvbmZpZ1NlcnZpY2UuZ2V0PG51bWJlcj4oJ2RhdGFiYXNlLnBvcnQnKSxcclxuICAgICAgICB1c2VybmFtZTogY29uZmlnU2VydmljZS5nZXQ8c3RyaW5nPignZGF0YWJhc2UudXNlcicpLFxyXG4gICAgICAgIHBhc3N3b3JkOiBjb25maWdTZXJ2aWNlLmdldDxzdHJpbmc+KCdkYXRhYmFzZS5wYXNzd29yZCcpLFxyXG4gICAgICAgIGRhdGFiYXNlOiBjb25maWdTZXJ2aWNlLmdldDxzdHJpbmc+KCdkYXRhYmFzZS5uYW1lJyksXHJcbiAgICAgICAgYXV0b0xvYWRFbnRpdGllczogY29uZmlnU2VydmljZS5nZXQ8Ym9vbGVhbj4oJ2RhdGFiYXNlLmF1dG9sb2FkJyksXHJcbiAgICAgICAgc3luY2hyb25pemU6IGNvbmZpZ1NlcnZpY2UuZ2V0PGJvb2xlYW4+KCdkYXRhYmFzZS5zeW5jaHJvbml6ZScpLFxyXG4gICAgICAgIC8vIENvbm5lY3Rpb24gUG9vbCBTZXR0aW5nc1xyXG4gICAgICAgIGV4dHJhOiB7XHJcbiAgICAgICAgICBtYXg6IGNvbmZpZ1NlcnZpY2UuZ2V0PG51bWJlcj4oJ2RhdGFiYXNlLm1heFBvb2xTaXplJyksXHJcbiAgICAgICAgICBtaW46IGNvbmZpZ1NlcnZpY2UuZ2V0PG51bWJlcj4oJ2RhdGFiYXNlLm1pblBvb2xTaXplJyksXHJcbiAgICAgICAgICBpZGxlVGltZW91dE1pbGxpczogY29uZmlnU2VydmljZS5nZXQ8bnVtYmVyPihcclxuICAgICAgICAgICAgJ2RhdGFiYXNlLnBvb2xJZGxlVGltZW91dCcsXHJcbiAgICAgICAgICApLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gUmV0cnkgTWVjaGFuaXNtXHJcbiAgICAgICAgcmV0cnlBdHRlbXB0czogY29uZmlnU2VydmljZS5nZXQ8bnVtYmVyPignZGF0YWJhc2UucmV0cnlBdHRlbXB0cycpLFxyXG4gICAgICAgIHJldHJ5RGVsYXk6IGNvbmZpZ1NlcnZpY2UuZ2V0PG51bWJlcj4oJ2RhdGFiYXNlLnJldHJ5RGVsYXknKSxcclxuICAgICAgfSksXHJcbiAgICB9KSxcclxuICAgIFVzZXJzTW9kdWxlLFxyXG4gICAgQ291cnNlc01vZHVsZSxcclxuICAgIEF1dGhNb2R1bGUsXHJcbiAgICBDZXJ0aWZpY2F0ZU1vZHVsZSxcclxuICAgIEZpbGVzTW9kdWxlLFxyXG4gICAgRW1haWxNb2R1bGUsXHJcbiAgICBMZXNzb25Nb2R1bGUsXHJcbiAgICBJcGZzTW9kdWxlLFxyXG4gICAgTW9kZXJhdGlvbk1vZHVsZSxcclxuICAgIFN1Ym1pc3Npb25Nb2R1bGUsXHJcbiAgICBVc2VyUHJvZmlsZXNNb2R1bGUsXHJcbiAgICBDcmVkZW50aWFsTW9kdWxlLFxyXG4gICAgQXJjaGl2ZU1vZHVsZSxcclxuICAgIC8vIEZlZWRiYWNrTW9kdWxlLFxyXG4gICAgLy8gSTE4bk1vZHVsZSxcclxuICAgIE1lbnRvcnNoaXBNb2R1bGUsXHJcbiAgICBUcmFuc2xhdGlvbk1vZHVsZSxcclxuICAgIEdkcHJNb2R1bGUsXHJcbiAgICBNb25pdG9yaW5nTW9kdWxlLFxyXG4gICAgVXNlcnNNb2R1bGUsXHJcbiAgICBDb3Vyc2VzQWR2YW5jZXNNb2R1bGUsXHJcbiAgICBBdXRoQ29udHJvbGxlclYxLFxyXG4gICAgQXV0aENvbnRyb2xsZXJWMixcclxuICAgIC8vIENvdXJzZXNDb250cm9sbGVyVjEsXHJcbiAgICAvLyBDb3Vyc2VzQ29udHJvbGxlclYyLFxyXG4gICAgVmVyc2lvbkNvbnRyb2xsZXIsXHJcbiAgICBDbXNNb2R1bGUsXHJcbiAgICBQYXltZW50TW9kdWxlLFxyXG4gIF0sXHJcbiAgY29udHJvbGxlcnM6IFtBcHBDb250cm9sbGVyXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIEFwcFNlcnZpY2UsXHJcbiAgICBWZXJzaW9uQW5hbHl0aWNzU2VydmljZSxcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogQVBQX0lOVEVSQ0VQVE9SLFxyXG4gICAgICB1c2VDbGFzczogVmVyc2lvblRyYWNraW5nSW50ZXJjZXB0b3IsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBBUFBfSU5URVJDRVBUT1IsXHJcbiAgICAgIHVzZUNsYXNzOiBQZXJmb3JtYW5jZUludGVyY2VwdG9yLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogQVBQX0dVQVJELFxyXG4gICAgICB1c2VDbGFzczogQ3VzdG9tVGhyb3R0bGVyR3VhcmQsXHJcbiAgICB9LFxyXG4gICAgU3RlbGxhclNlcnZpY2UsXHJcbiAgXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSBpbXBsZW1lbnRzIE5lc3RNb2R1bGUge1xyXG4gIGNvbmZpZ3VyZShjb25zdW1lcjogTWlkZGxld2FyZUNvbnN1bWVyKSB7XHJcbiAgICBjb25zdW1lclxyXG4gICAgICAuYXBwbHkoXHJcbiAgICAgICAgVmVyc2lvbkhlYWRlck1pZGRsZXdhcmUsXHJcbiAgICAgICAgRGVwcmVjYXRpb25XYXJuaW5nTWlkZGxld2FyZSxcclxuICAgICAgICBBcGlVc2FnZUxvZ2dlck1pZGRsZXdhcmUsXHJcbiAgICAgIClcclxuICAgICAgLmZvclJvdXRlcygnKicpO1xyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=