{"file":"C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\email\\entities\\email-log.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\ojoseph\\Documents\\StrellerMinds-Backend\\src\\email\\entities\\email-log.entity.ts"],"sourcesContent":["import { Entity, Column, PrimaryGeneratedColumn, CreateDateColumn, UpdateDateColumn, Index } from \"typeorm\";\r\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\r\n\r\n/**\r\n * Entity representing an email log entry.\r\n */\r\n@Entity(\"email_logs\")\r\nexport class EmailLog {\r\n  /** Unique ID for the email log entry */\r\n  @ApiProperty({ description: 'Unique ID for the email log entry', example: 'uuid-v4' })\r\n  @PrimaryGeneratedColumn(\"uuid\")\r\n  id: string;\r\n\r\n  /** Recipient email address */\r\n  @ApiProperty({ description: 'Recipient email address', example: 'user@example.com' })\r\n  @Column()\r\n  @Index()\r\n  recipient: string;\r\n\r\n  /** Email subject */\r\n  @ApiProperty({ description: 'Email subject', example: 'Welcome to Streller!' })\r\n  @Column()\r\n  subject: string;\r\n\r\n  /** Email template name */\r\n  @ApiProperty({ description: 'Email template name', example: 'welcome-template' })\r\n  @Column()\r\n  @Index()\r\n  templateName: string;\r\n\r\n  /** Message ID from the email provider (optional) */\r\n  @ApiPropertyOptional({ description: 'Message ID from the email provider', example: 'abc123' })\r\n  @Column({ nullable: true })\r\n  messageId: string;\r\n\r\n  /** Email status */\r\n  @ApiProperty({ description: 'Email status', enum: ['sent', 'failed', 'opened', 'clicked'], example: 'sent' })\r\n  @Column()\r\n  @Index()\r\n  status: \"sent\" | \"failed\" | \"opened\" | \"clicked\";\r\n\r\n  /** Error message (optional) */\r\n  @ApiPropertyOptional({ description: 'Error message', example: 'SMTP connection failed' })\r\n  @Column({ nullable: true })\r\n  error: string;\r\n\r\n  /** Date/time when the email was created */\r\n  @ApiProperty({ description: 'Date/time when the email was created', type: String, format: 'date-time', example: '2025-06-29T12:00:00Z' })\r\n  @CreateDateColumn()\r\n  @Index()\r\n  createdAt: Date;\r\n\r\n  /** Date/time when the email was opened (optional) */\r\n  @ApiPropertyOptional({ description: 'Date/time when the email was opened', type: String, format: 'date-time', example: '2025-06-29T12:05:00Z' })\r\n  @Column({ nullable: true })\r\n  openedAt: Date;\r\n\r\n  /** Date/time when the email was clicked (optional) */\r\n  @ApiPropertyOptional({ description: 'Date/time when the email was clicked', type: String, format: 'date-time', example: '2025-06-29T12:10:00Z' })\r\n  @Column({ nullable: true })\r\n  clickedAt: Date;\r\n\r\n  /** Additional metadata (optional) */\r\n  @ApiPropertyOptional({ description: 'Additional metadata', type: 'object', example: { ip: '127.0.0.1' } })\r\n  @Column({ nullable: true, type: \"jsonb\" })\r\n  metadata: Record<string, any>;\r\n\r\n  /** First opened timestamp */\r\n  @ApiPropertyOptional({ description: 'First time the email was opened', type: String, format: 'date-time' })\r\n  @Column({ type: 'timestamp', nullable: true })\r\n  @Index()\r\n  firstOpenedAt: Date | null;\r\n\r\n  /** Total number of opens */\r\n  @ApiPropertyOptional({ description: 'Total number of opens', example: 0 })\r\n  @Column({ type: 'int', default: 0 })\r\n  openCount: number;\r\n\r\n  /** First clicked timestamp */\r\n  @ApiPropertyOptional({ description: 'First time a link was clicked', type: String, format: 'date-time' })\r\n  @Column({ type: 'timestamp', nullable: true })\r\n  @Index()\r\n  firstClickedAt: Date | null;\r\n\r\n  /** Total number of clicks */\r\n  @ApiPropertyOptional({ description: 'Total number of clicks', example: 0 })\r\n  @Column({ type: 'int', default: 0 })\r\n  clickCount: number;\r\n\r\n  /** Click events history */\r\n  @ApiPropertyOptional({ description: 'Array of click events', type: 'array', example: [{ clickedAt: '2025-06-29T12:10:00Z', url: 'https://example.com' }] })\r\n  @Column({ type: 'jsonb', nullable: true })\r\n  clickEvents: Array<{ clickedAt: string; url: string; userAgent?: string; ipAddress?: string }> | null;\r\n\r\n  /** Whether tracking is enabled for this email */\r\n  @ApiPropertyOptional({ description: 'Tracking enabled for this email', example: true })\r\n  @Column({ type: 'boolean', default: false })\r\n  @Index()\r\n  trackingEnabled: boolean;\r\n\r\n  /** Unique tracking token for this email */\r\n  @ApiPropertyOptional({ description: 'Unique tracking token', example: 'a1b2c3...' })\r\n  @Column({ type: 'varchar', length: 64, nullable: true })\r\n  @Index()\r\n  trackingToken: string | null;\r\n\r\n  /** When the log was last updated */\r\n  @ApiPropertyOptional({ description: 'Date/time when the email log was last updated', type: String, format: 'date-time' })\r\n  @UpdateDateColumn()\r\n  updatedAt: Date;\r\n}\r\n\r\n"],"version":3}